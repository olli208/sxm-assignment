(this["webpackJsonpsxm-assignment"]=this["webpackJsonpsxm-assignment"]||[]).push([[0],{16:function(n,e,t){n.exports=t.p+"static/media/saxum.97df8ea3.jpg"},20:function(n,e,t){n.exports=t(30)},30:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),c=t(12),u=t.n(c),i=t(17),o=t(3),l=t(1),s=t(2);function f(){var n=Object(l.a)(["\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n}\n\nh1 {\n  font-size: 3em; \n  margin: 0;\n  color: #202124;\n  font-weight: 700;\n}\n\nh2 {\n  font-size: 2em; \n  margin: 0;\n  margin-bottom: .5em;\n}\n\nh3 {\n  font-size: 1.5em; \n  margin: 0;\n}\n\np, span {\n  font-size: 1.3rem;\n}\n\nb {\n  color:  #11d1d1;\n}\n\n"]);return f=function(){return n},n}var d=Object(s.a)(f()),m=t(10),p=t.n(m),h=t(15);var b=function(){var n,e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(r.useEffect)((function(){u()}),[]);var u=function(){var e=indexedDB.open("saxumers");e.onupgradeneeded=function(e){(n=e.target.result).createObjectStore("saxumers_user",{keyPath:"id"}),console.log("upgrade needed")},e.onsuccess=function(t){n=e.result,console.log("DB OPEN: ".concat(n.name)),i()},e.onerror=function(n){console.log("err",n)}},i=function(){var e=[];n.transaction("saxumers_user","readonly").objectStore("saxumers_user").openCursor().onsuccess=function(n){var t=n.target.result;t?(e.push(t.value),t.continue()):c(e)}};return{addDB:function(e){var t=n.transaction("saxumers_user","readwrite").objectStore("saxumers_user");e.forEach((function(n,e){t.add(n)}))},DBEntries:a}};var v=function(){var n=Object(r.useState)([]),e=Object(o.a)(n,2),t=e[0],a=e[1],c=b(),u=c.addDB,i=c.DBEntries,l=new Headers,s=window.btoa("".concat("srpwcqp2",":").concat("ej7s62xt2mrtefkqrepm"));l.append("Authorization","Basic ".concat(s));var f=new Request("https://sheetdb.io/api/v1/smyv5xfvpjqeh",{method:"GET",headers:l});function d(){return(d=Object(h.a)(p.a.mark((function n(){var e,t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("get db data before fetching",i),!(i.length>0)){n.next=6;break}console.log("FROM IDB"),a(i),n.next=21;break;case 6:return n.prev=6,n.next=9,fetch(f).then((function(n){return n})).catch((function(n){return console.log("fetch error",n)}));case 9:return e=n.sent,n.next=12,e.json();case 12:t=n.sent,console.log("FROM FETCH"),u(t),a(t),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(6),a(n.t0);case 21:case"end":return n.stop()}}),n,null,[[6,18]])})))).apply(this,arguments)}return{data:t,fetchData:function(){return d.apply(this,arguments)}}},g=t(16),x=t.n(g),E=t(4),j=t.n(E);function y(){var n=Object(l.a)(["\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: ",";\n\talign-items: ",";\n\twidth: ",";\n\tflex-direction: ",";\n"]);return y=function(){return n},n}var O=s.b.div(y(),(function(n){return n.justifyContent}),(function(n){return n.alignItems}),(function(n){return n.isFullWidth&&"100%"}),(function(n){var e=n.direction;return e&&e}));O.propTypes={justifyContent:j.a.string,alignItems:j.a.string,isFullWidth:j.a.bool,direction:j.a.string},O.defaultProps={justifyContent:"flex-start"};var w=O;function F(){var n=Object(l.a)(["\n  padding: 1rem .75rem;\n  border-radius: 24px;\n  border: 0;\n  box-shadow: 0 1px 6px 0 rgba(32,33,36,0.28);\n  margin: 0 auto;\n  width: 100%;\n\n@media (min-width: 780px) {\n  width: 60%;\n}\n"]);return F=function(){return n},n}function k(){var n=Object(l.a)(["\n  margin: 1.5rem 0;\n"]);return k=function(){return n},n}function C(){var n=Object(l.a)(["\n  padding: 1rem;\n"]);return C=function(){return n},n}var S=s.b.header(C()),B=s.b.img(k()),D=s.b.input(F());var _=function(n){var e=n.handleInput,t=n.children;return a.a.createElement(S,null,a.a.createElement(w,{justifyContent:"center",isFullWidth:!0},a.a.createElement(B,{src:x.a,alt:"saxum logo"}),a.a.createElement(w,{justifyContent:"center",isFullWidth:!0},a.a.createElement(D,{type:"text",onChange:e,placeholder:"search by name/function"}),t)))};function I(){var n=Object(l.a)(["\n  span {\n    display: block;\n  }\n\n  padding: 1rem;\n  margin: 1.5rem 0;\n  list-style: none;\n"]);return I=function(){return n},n}function z(){var n=Object(l.a)(["\n  width: 100%;\n  padding:0;\n"]);return z=function(){return n},n}var M=s.b.ul(z()),R=s.b.li(I());var q=function(n){var e=n.data;return a.a.createElement(M,null,0===e.length?"no results":e.map((function(n,e){return a.a.createElement(R,{key:e},a.a.createElement("h3",null,n.first_name," ",n.last_name),a.a.createElement("span",null,n.function))})))};function W(){var n=Object(l.a)(["\nwidth: 100%;\n\n@media (min-width: 780px) {\n  width: 60%;\n}\n"]);return W=function(){return n},n}var H=s.b.div(W());var P=function(n){var e=n.data,t=n.filter,c=n.children,u=Object(r.useMemo)((function(){return e.filter((function(n,e,r){return 0===t.length?r:t.includes(n.function)}))}),[e,t]);return a.a.createElement("section",null,e&&a.a.createElement(w,{justifyContent:"center"},a.a.createElement(H,null,a.a.createElement(w,null,c),a.a.createElement(w,{justifyContent:"flex-end"},a.a.createElement("h2",null,a.a.createElement("b",null,u.length)," saxumers found"),a.a.createElement(q,{data:u})))))};function T(){var n=Object(l.a)(["\n  margin: .5rem;\n  list-style: none;\n"]);return T=function(){return n},n}function J(){var n=Object(l.a)(["\n  width: 100%;\n  padding:0;\n"]);return J=function(){return n},n}var N=s.b.ul(J()),U=s.b.li(T());var A=function(n){var e=n.data,t=n.filter,r=n.setFilter;return a.a.createElement(N,null,e.map((function(n){return a.a.createElement(U,null,a.a.createElement("label",null,a.a.createElement("input",{name:"function",type:"checkbox",checked:t.includes(n),onChange:function(){return r(n)}}),n))})))};var G=function(n){var e=n.data,t=n.filter,r=n.handleFilter;return a.a.createElement("div",null,"filter by:",a.a.createElement(A,{data:e,filter:t,setFilter:r}))};var K=function(){var n,e=v(),t=e.data,c=e.fetchData,u=Object(r.useState)([]),l=Object(o.a)(u,2),s=l[0],f=l[1],m=Object(r.useState)(t),p=Object(o.a)(m,2),h=p[0],b=p[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(d,null),a.a.createElement("div",null,a.a.createElement(_,{handleInput:function(n){c();var e=new RegExp(n.target.value,"gi");b((function(){return t.filter((function(n){return n.function.match(e)||n.first_name.match(e)||n.last_name.match(e)}))}))}}),void 0!==t&&0!==t.length&&a.a.createElement(P,{data:h||t,filter:s},a.a.createElement(G,{data:(n=h||t,n.filter((function(n,e,t){return e===t.findIndex((function(e){return e.function===n.function}))})).map((function(n){return n.function}))),handleFilter:function(n){s.includes(n)?f(s.filter((function(e){return e!==n}))):f((function(e){return[].concat(Object(i.a)(e),[n])}))},filter:s}))))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(K,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.a33606dc.chunk.js.map