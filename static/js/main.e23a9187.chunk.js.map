{"version":3,"sources":["assets/saxum.jpg","utils/useGlobalStyle.jsx","utils/useIDB.jsx","utils/useFecthData.jsx","components/FlexWrapper.jsx","components/Header.jsx","components/EmployeeList.jsx","components/ResultSection.jsx","components/FilterList.jsx","components/FilterSection.jsx","App.js","index.js"],"names":["module","exports","GlobalStyle","createGlobalStyle","useIDB","db","useState","DBEntries","setDBEntries","useEffect","openDB","DBOpenReq","indexedDB","open","onupgradeneeded","ev","target","result","createObjectStore","keyPath","console","log","onsuccess","name","viewDB","onerror","e","users","transaction","objectStore","openCursor","cursor","push","value","continue","addDB","data","sxmUsers","forEach","el","i","add","useFetchData","setData","H","Headers","encode","window","btoa","process","USERNAME","PASSWORD","append","req","Request","method","headers","a","length","fetch","then","res","catch","err","requestData","json","fetchData","FlexWrapper","styled","div","justifyContent","alignItems","isFullWidth","direction","propTypes","PropTypes","string","bool","defaultProps","StyledHeader","header","StyledLogo","img","StyledSearchbar","input","Header","handleInput","children","src","logo","alt","type","onChange","placeholder","StyledList","ul","StyledListItem","li","EmployeeList","map","key","first_name","last_name","function","Wrapper","ResultSection","filter","listItems","useMemo","self","includes","FilterList","setFilter","checked","FilterSection","handleFilter","App","items","filteredData","setFilterdData","regex","RegExp","match","findIndex","item","newFilter","oldFilter","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e23a9187.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/saxum.97df8ea3.jpg\";","import { createGlobalStyle } from 'styled-components'\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\r\n    sans-serif;\r\n}\r\n\r\nh1 {\r\n  font-size: 3em; \r\n  margin: 0;\r\n  color: #202124;\r\n  font-weight: 700;\r\n}\r\n\r\nh2 {\r\n  font-size: 2em; \r\n  margin: 0;\r\n  margin-bottom: .5em;\r\n}\r\n\r\nh3 {\r\n  font-size: 1.5em; \r\n  margin: 0;\r\n}\r\n\r\np, span {\r\n  font-size: 1.3rem;\r\n}\r\n\r\nb {\r\n  color:  #11d1d1;\r\n}\r\n\r\n`\r\n\r\nexport default GlobalStyle","import { useState, useEffect } from 'react';\r\n\r\nfunction useIDB() {\r\n  let db;\r\n  const [DBEntries, setDBEntries] = useState([]);\r\n\r\n  useEffect(() => {\r\n    openDB(); // test \r\n  }, []);\r\n\r\n  const openDB = () => {\r\n    const DBOpenReq = indexedDB.open('saxumers')\r\n\r\n    DBOpenReq.onupgradeneeded = ev => {\r\n      db = ev.target.result;\r\n      db.createObjectStore('saxumers_user', { keyPath: 'id' })\r\n      console.log('upgrade needed')\r\n    }\r\n\r\n    DBOpenReq.onsuccess = ev => {\r\n      db = DBOpenReq.result\r\n      console.log(`DB OPEN: ${db.name}`)\r\n      viewDB();\r\n    }\r\n\r\n    DBOpenReq.onerror = e => {\r\n      // todo error handling...\r\n      console.log('err', e)\r\n    }\r\n  }\r\n\r\n  const addDB = data => {\r\n    const tx = db.transaction('saxumers_user', 'readwrite')\r\n    const sxmUsers = tx.objectStore('saxumers_user')\r\n\r\n    data.forEach((el, i) => {\r\n      sxmUsers.add(el)\r\n    })\r\n  }\r\n\r\n  const viewDB = () => {\r\n    let users = [];\r\n    const tx = db.transaction('saxumers_user', 'readonly')\r\n    const sxmUsers = tx.objectStore('saxumers_user')\r\n    sxmUsers.openCursor().onsuccess = e => {\r\n      const cursor = e.target.result;\r\n\r\n      if (cursor) {\r\n        users.push(cursor.value)\r\n        cursor.continue()\r\n      } else {\r\n        // can cause problems(?), check back later...\r\n        setDBEntries(users)\r\n      }\r\n    }\r\n  }\r\n\r\n  return { addDB, DBEntries }\r\n}\r\n\r\nexport default useIDB;","import { useState } from 'react';\r\nimport useIDB from './useIDB';\r\n\r\n// Check cache before requesting data...\r\nfunction useFetchData() {\r\n  const [data, setData] = useState(null);\r\n  const { addDB, DBEntries } = useIDB();\r\n\r\n  let H = new Headers();\r\n  let encode = window.btoa(`${process.env.USERNAME}:${process.env.PASSWORD}`)\r\n  H.append('Authorization', `Basic ${encode}`);\r\n  let req = new Request('https://sheetdb.io/api/v1/smyv5xfvpjqeh', {\r\n    method: 'GET',\r\n    headers: H,\r\n  });\r\n\r\n  async function fetchData() {\r\n    console.log('get db data before fetching', DBEntries)\r\n    if (DBEntries.length > 0) {\r\n      console.log('FROM IDB')\r\n      setData(DBEntries)\r\n    } else {\r\n      try {\r\n        const requestData = await fetch(req)\r\n          .then(res => {\r\n            return res\r\n          })\r\n          .catch(err => console.log('fetch error', err)) // fixme (catch doesnt handle all errors...)\r\n\r\n        const json = await requestData.json();\r\n        console.log('FROM FETCH')\r\n        addDB(json)\r\n        setData(json)\r\n      }\r\n      catch (error) {\r\n        setData(error)\r\n      }\r\n    }\r\n  };\r\n\r\n  return { data, fetchData }\r\n}\r\n\r\nexport default useFetchData","\r\nimport styled from 'styled-components';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nconst FlexWrapper = styled.div`\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: ${({ justifyContent }) => justifyContent};\r\n\talign-items: ${({ alignItems }) => alignItems};\r\n\twidth: ${({ isFullWidth }) => isFullWidth && '100%'};\r\n\tflex-direction: ${({ direction }) => direction && direction};\r\n`\r\n\r\nFlexWrapper.propTypes = {\r\n  justifyContent: PropTypes.string,\r\n  alignItems: PropTypes.string,\r\n  isFullWidth: PropTypes.bool,\r\n  direction: PropTypes.string\r\n}\r\n\r\nFlexWrapper.defaultProps = {\r\n  justifyContent: 'flex-start'\r\n}\r\n\r\nexport default FlexWrapper","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport logo from '../assets/saxum.jpg';\r\nimport FlexWrapper from './FlexWrapper'\r\n\r\nconst StyledHeader = styled.header`\r\n  padding: 1rem;\r\n`\r\n\r\nconst StyledLogo = styled.img`\r\n  margin: 1.5rem 0;\r\n`\r\n\r\nconst StyledSearchbar = styled.input`\r\n  padding: 1rem .75rem;\r\n  border-radius: 24px;\r\n  border: 0;\r\n  box-shadow: 0 1px 6px 0 rgba(32,33,36,0.28);\r\n  margin: 0 auto;\r\n  width: 100%;\r\n\r\n@media (min-width: 780px) {\r\n  width: 60%;\r\n}\r\n`\r\n\r\nfunction Header({ handleInput, children }) {\r\n  return (\r\n    <StyledHeader>\r\n      <FlexWrapper justifyContent='center' isFullWidth>\r\n        <StyledLogo src={logo} alt=\"saxum logo\" />\r\n        <FlexWrapper justifyContent='center' isFullWidth>\r\n          <StyledSearchbar\r\n            type=\"text\"\r\n            onChange={handleInput}\r\n            placeholder=\"search by name/function\" />\r\n          {children}\r\n        </FlexWrapper>\r\n      </FlexWrapper>\r\n    </StyledHeader>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledList = styled.ul`\r\n  width: 100%;\r\n  padding:0;\r\n`\r\n\r\nconst StyledListItem = styled.li`\r\n  span {\r\n    display: block;\r\n  }\r\n\r\n  padding: 1rem;\r\n  margin: 1.5rem 0;\r\n  list-style: none;\r\n`\r\n\r\nfunction EmployeeList({ data }) {\r\n  return (\r\n    <StyledList>\r\n      {data.length === 0 ? 'no results' : (\r\n        data.map((el, i) => (\r\n          <StyledListItem key={i}>\r\n            <h3>{el.first_name} {el.last_name}</h3>\r\n            <span>{el.function}</span>\r\n          </StyledListItem>\r\n        ))\r\n      )}\r\n    </StyledList>\r\n  )\r\n}\r\n\r\nexport default EmployeeList;","import React, { useMemo } from 'react';\r\nimport styled from 'styled-components'\r\nimport EmployeeList from './EmployeeList';\r\nimport FlexWrapper from './FlexWrapper';\r\n\r\nconst Wrapper = styled.div`\r\nwidth: 100%;\r\n\r\n@media (min-width: 780px) {\r\n  width: 60%;\r\n}\r\n`\r\n\r\nfunction ResultSection({ data, filter, children }) {\r\n  const listItems = useMemo(() => (\r\n    data.filter((el, i, self) => (filter.length === 0) ? self : filter.includes(el.function))\r\n  ), [data, filter]);\r\n\r\n  return (\r\n    <section>\r\n      {data && (\r\n        <FlexWrapper justifyContent='center'>\r\n          <Wrapper>\r\n            <FlexWrapper>\r\n              {children}\r\n            </FlexWrapper>\r\n            <FlexWrapper justifyContent='flex-end'>\r\n              <h2><b>{listItems.length}</b> saxumers found</h2>\r\n              <EmployeeList data={listItems} />\r\n            </FlexWrapper>\r\n          </Wrapper>\r\n        </FlexWrapper>\r\n      )}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default ResultSection;","import React from 'react';\r\nimport styled from 'styled-components'\r\n\r\nconst StyledList = styled.ul`\r\n  width: 100%;\r\n  padding:0;\r\n`\r\n\r\nconst StyledListItem = styled.li`\r\n  margin: .5rem;\r\n  list-style: none;\r\n`\r\n\r\nfunction FilterList({ data, filter, setFilter }) {\r\n  return (\r\n    <StyledList>\r\n      {data.map(el => (\r\n        <StyledListItem>\r\n          <label>\r\n            <input\r\n              name=\"function\"\r\n              type=\"checkbox\"\r\n              checked={filter.includes(el)}\r\n              onChange={() => setFilter(el)}\r\n            />\r\n            {el}\r\n          </label>\r\n        </StyledListItem>\r\n      ))}\r\n    </StyledList>\r\n\r\n  )\r\n}\r\n\r\nexport default FilterList;","import React from 'react';\r\nimport FilterList from './FilterList'\r\n\r\nfunction FilterSection({ data, filter, handleFilter }) {\r\n  return (\r\n    <div>\r\n      filter by:\r\n      <FilterList data={data} filter={filter} setFilter={handleFilter} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FilterSection;","import React, { useState } from 'react';\n\nimport GlobalStyle from './utils/useGlobalStyle';\nimport useFetchData from './utils/useFecthData'\nimport Header from './components/Header'\nimport ResultSection from './components/ResultSection'\nimport FilterSection from './components/FilterSection'\n\nfunction App() {\n  const { data, fetchData } = useFetchData();\n  const [filter, setFilter] = useState([]);\n  const [filteredData, setFilterdData] = useState(data)\n\n  const getFilters = items => items.filter((el, i, self) => i === self.findIndex(item => item.function === el.function)).map(el => el.function)\n\n  const handleFilter = newFilter => {\n    if (filter.includes(newFilter)) {\n      setFilter(filter.filter(e => e !== newFilter))\n      return\n    }\n\n    setFilter(oldFilter => [...oldFilter, newFilter])\n  }\n\n  const handleInput = e => {\n    fetchData();\n    const regex = new RegExp(e.target.value, 'gi')\n    setFilterdData(() => data?.filter(el => el.function.match(regex) || el.first_name.match(regex) || el.last_name.match(regex)))\n  }\n\n  return (\n    <>\n      <GlobalStyle />\n      <div>\n        <Header handleInput={handleInput} />\n\n        {data && (\n          <ResultSection data={filteredData || data} filter={filter}>\n            <FilterSection\n              data={getFilters(filteredData || data)}\n              handleFilter={handleFilter}\n              filter={filter} />\n          </ResultSection>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}